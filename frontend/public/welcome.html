<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Welcome to the International Society for Shellfish Restoration - Join our global community">
  <title data-i18n="welcomeTitle">Welcome to ISRS - International Society for Shellfish Restoration</title>

  <!-- Canonical URL -->
  <link rel="canonical" href="https://www.shellfish-society.org/welcome.html">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.shellfish-society.org/welcome.html">
  <meta property="og:title" content="Welcome to ISRS - International Society for Shellfish Restoration">
  <meta property="og:description" content="Welcome to the International Society for Shellfish Restoration - Join our global community">
  <meta property="og:image" content="https://www.shellfish-society.org/images/icsr-2024-32.jpg">
  <meta property="og:site_name" content="International Shellfish Restoration Society">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Welcome to ISRS - International Society for Shellfish Restoration">
  <meta name="twitter:description" content="Welcome to the International Society for Shellfish Restoration - Join our global community">
  <meta name="twitter:image" content="https://www.shellfish-society.org/images/icsr-2024-32.jpg">

  <link rel="icon" type="image/png" href="/images/favicon.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Marcellus&family=PT+Serif:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/styles.css">
  <script src="/js/theme.js"></script>
  <script src="/js/analytics.js"></script>
  <style>
    /* Welcome Page Specific Styles */
    .welcome-hero {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(rgba(30, 90, 142, 0.95), rgba(41, 128, 185, 0.95)), url('/images/icsr-2024-32.jpg');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      padding: 2rem;
    }

    .welcome-container {
      max-width: 700px;
      text-align: center;
      color: white;
    }

    .welcome-logo {
      max-width: 200px;
      margin: 0 auto 2rem;
    }

    .welcome-logo img {
      width: 100%;
      height: auto;
      filter: brightness(0) invert(1);
    }

    .welcome-title {
      font-family: 'Marcellus', serif;
      font-size: 3rem;
      margin: 0 0 1rem;
      line-height: 1.2;
    }

    .welcome-subtitle {
      font-size: 1.5rem;
      margin: 0 0 1rem;
      font-weight: 300;
      opacity: 0.95;
    }

    .welcome-announcement {
      background: rgba(255, 255, 255, 0.15);
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 12px;
      padding: 1.5rem;
      margin: 2rem 0;
      backdrop-filter: blur(10px);
    }

    .welcome-announcement h2 {
      margin: 0 0 0.5rem;
      font-size: 1.75rem;
      color: #FFC107;
    }

    .welcome-announcement p {
      margin: 0;
      font-size: 1.1rem;
      line-height: 1.6;
    }

    .welcome-form {
      background: rgba(255, 255, 255, 0.98);
      border-radius: 12px;
      padding: 2.5rem;
      margin: 2rem 0;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      color: var(--text-dark);
    }

    .welcome-form h3 {
      margin: 0 0 1rem;
      font-size: 1.5rem;
      color: var(--primary-blue);
    }

    .welcome-form p {
      margin: 0 0 1.5rem;
      color: var(--text-light);
      font-size: 1rem;
    }

    .email-input-group {
      display: flex;
      gap: 0.75rem;
      margin-bottom: 1.5rem;
    }

    .email-input-group input {
      flex: 1;
      padding: 1rem;
      border: 2px solid var(--border-color);
      border-radius: 8px;
      font-size: 1rem;
      font-family: 'PT Serif', Georgia, serif;
      transition: all 0.3s;
    }

    .email-input-group input:focus {
      outline: none;
      border-color: var(--primary-blue);
      box-shadow: 0 0 0 3px rgba(30, 90, 142, 0.1);
    }

    .email-input-group button {
      padding: 1rem 2rem;
      background: linear-gradient(135deg, #2E5A8A 0%, #5BC0BE 100%);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      font-family: 'PT Serif', Georgia, serif;
      cursor: pointer;
      transition: all 0.3s;
      /* i18n: Allow text to wrap for longer translations */
      min-width: 120px;
    }

    .email-input-group button:hover:not(:disabled) {
      background: linear-gradient(135deg, #5BC0BE 0%, #2E5A8A 100%);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(30, 90, 142, 0.3);
    }

    .email-input-group button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .form-message {
      padding: 1rem;
      border-radius: 8px;
      margin-bottom: 1rem;
      font-size: 0.95rem;
      display: none;
    }

    .form-message.success {
      background: #d4edda;
      border: 1px solid #c3e6cb;
      color: #155724;
      display: block;
    }

    .form-message.error {
      background: #f8d7da;
      border: 1px solid #f5c6cb;
      color: #721c24;
      display: block;
    }

    .form-message.info {
      background: #d1ecf1;
      border: 1px solid #bee5eb;
      color: #0c5460;
      display: block;
    }

    .welcome-benefits {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-top: 1.5rem;
    }

    .benefit-item {
      text-align: left;
      font-size: 0.95rem;
      display: flex;
      align-items: flex-start;
      gap: 0.5rem;
    }

    .benefit-item::before {
      content: "âœ“";
      color: var(--secondary-teal);
      font-weight: bold;
      font-size: 1.2rem;
      flex-shrink: 0;
    }

    .welcome-footer {
      margin-top: 2rem;
      font-size: 0.9rem;
      opacity: 0.9;
    }

    .welcome-footer a {
      color: white;
      text-decoration: underline;
      transition: opacity 0.3s;
    }

    .welcome-footer a:hover {
      opacity: 0.8;
    }

    /* Profile Preview Section */
    .profile-preview {
      display: none;
      text-align: left;
      margin-top: 1.5rem;
    }

    .profile-preview.visible {
      display: block;
    }

    .preview-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 2px solid var(--border-color);
    }

    .preview-avatar {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: linear-gradient(135deg, #2E5A8A 0%, #5BC0BE 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.5rem;
      font-weight: bold;
      flex-shrink: 0;
    }

    .preview-identity h4 {
      margin: 0 0 0.25rem;
      font-size: 1.25rem;
      color: var(--primary-blue);
    }

    .preview-identity p {
      margin: 0;
      font-size: 0.9rem;
      color: var(--text-light);
    }

    .preview-section {
      margin-bottom: 1.25rem;
    }

    .preview-section-title {
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--text-light);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 0.5rem;
    }

    .conference-history-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .conference-history-item {
      padding: 0.75rem;
      background: rgba(91, 192, 190, 0.1);
      border-radius: 8px;
      margin-bottom: 0.5rem;
      border-left: 3px solid var(--secondary-teal);
    }

    .conference-history-item strong {
      color: var(--primary-blue);
    }

    .conference-roles {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 0.5rem;
    }

    .role-badge {
      display: inline-block;
      padding: 0.2rem 0.6rem;
      background: var(--secondary-teal);
      color: white;
      border-radius: 12px;
      font-size: 0.75rem;
      font-weight: 600;
    }

    .role-badge.presenter {
      background: #e74c3c;
    }

    .role-badge.exhibitor {
      background: #9b59b6;
    }

    .role-badge.sponsor {
      background: #f39c12;
    }

    .preview-actions {
      display: flex;
      gap: 0.75rem;
      margin-top: 1.5rem;
      flex-wrap: wrap;
    }

    .preview-actions button {
      flex: 1;
      min-width: 140px;
      padding: 1rem 1.5rem;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      font-family: 'PT Serif', Georgia, serif;
      cursor: pointer;
      transition: all 0.3s;
    }

    .btn-primary-action {
      background: linear-gradient(135deg, #2E5A8A 0%, #5BC0BE 100%);
      color: white;
      border: none;
    }

    .btn-primary-action:hover:not(:disabled) {
      background: linear-gradient(135deg, #5BC0BE 0%, #2E5A8A 100%);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(30, 90, 142, 0.3);
    }

    .btn-secondary-action {
      background: transparent;
      color: var(--primary-blue);
      border: 2px solid var(--primary-blue);
    }

    .btn-secondary-action:hover:not(:disabled) {
      background: rgba(30, 90, 142, 0.1);
    }

    .preview-actions button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .new-user-message {
      text-align: center;
      padding: 1.5rem;
      background: rgba(91, 192, 190, 0.1);
      border-radius: 8px;
      margin-top: 1rem;
    }

    .new-user-message h4 {
      margin: 0 0 0.5rem;
      color: var(--primary-blue);
    }

    .new-user-message p {
      margin: 0 0 1rem;
      color: var(--text-light);
    }

    @media (max-width: 768px) {
      .welcome-title {
        font-size: 2rem;
      }

      .welcome-subtitle {
        font-size: 1.2rem;
      }

      .welcome-announcement h2 {
        font-size: 1.4rem;
      }

      .email-input-group {
        flex-direction: column;
      }

      .email-input-group button {
        width: 100%;
      }

      .welcome-form {
        padding: 1.5rem;
      }

      .preview-actions {
        flex-direction: column;
      }

      .preview-actions button {
        width: 100%;
      }
    }

    /* Dark mode for form */
    .dark-mode .welcome-form {
      background: rgba(26, 26, 26, 0.98);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .dark-mode .welcome-form h3 {
      color: #5BC0BE;
    }

    .dark-mode .welcome-form p {
      color: #b0b0b0;
    }

    .dark-mode .email-input-group input {
      background: #2a2a2a;
      border-color: #505050;
      color: #f0f0f0;
    }

    .dark-mode .email-input-group input:focus {
      border-color: #5BC0BE;
      background: #2a2a2a;
    }

    .dark-mode .benefit-item {
      color: #e0e0e0;
    }

    .dark-mode .preview-identity h4 {
      color: #5BC0BE;
    }

    .dark-mode .preview-identity p {
      color: #b0b0b0;
    }

    .dark-mode .conference-history-item {
      background: rgba(91, 192, 190, 0.15);
    }

    .dark-mode .conference-history-item strong {
      color: #5BC0BE;
    }

    .dark-mode .btn-secondary-action {
      color: #5BC0BE;
      border-color: #5BC0BE;
    }

    .dark-mode .btn-secondary-action:hover:not(:disabled) {
      background: rgba(91, 192, 190, 0.1);
    }

    .dark-mode .new-user-message {
      background: rgba(91, 192, 190, 0.15);
    }

    .dark-mode .new-user-message h4 {
      color: #5BC0BE;
    }

    .dark-mode .new-user-message p {
      color: #b0b0b0;
    }
  </style>
</head>
<body>
  <div class="welcome-hero">
    <div class="welcome-container">
      <div class="welcome-logo">
        <img src="/images/logo-wide-blue.png" alt="ISRS Logo">
      </div>

      <h1 class="welcome-title" data-i18n="welcomeHeading">Welcome to ISRS</h1>
      <p class="welcome-subtitle" data-i18n="welcomeSubtitle">International Society for Shellfish Restoration</p>

      <div class="welcome-announcement">
        <h2 data-i18n="welcomeAnnouncementHeading">ðŸŽ‰ New Member Portal Launched!</h2>
        <p data-i18n="welcomeAnnouncementText">Access your profile, explore the member directory, register for ICSR2026 in Puget Sound, and connect with the global shellfish restoration community.</p>
      </div>

      <div class="welcome-form">
        <!-- Step 1: Email Entry -->
        <div id="step-email">
          <h3 data-i18n="welcomeGetStarted">Get Started</h3>
          <p data-i18n="welcomeEnterEmail">Enter your email to check your membership status or join our community.</p>

          <div id="form-message" class="form-message"></div>

          <form id="email-check-form">
            <div class="email-input-group">
              <input
                type="email"
                id="email-input"
                name="email"
                data-i18n-placeholder="welcomeEmailPlaceholder"
                placeholder="your@email.com"
                required
                autocomplete="email"
              >
              <button type="submit" id="submit-btn" data-i18n="welcomeContinue">Continue</button>
            </div>
          </form>

          <div class="welcome-benefits">
            <div class="benefit-item" data-i18n="welcomeBenefit1">Free membership</div>
            <div class="benefit-item" data-i18n="welcomeBenefit2">Member directory access</div>
            <div class="benefit-item" data-i18n="welcomeBenefit3">Conference registration</div>
            <div class="benefit-item" data-i18n="welcomeBenefit4">Global network</div>
          </div>
        </div>

        <!-- Step 2: Profile Preview (for returning users) -->
        <div id="step-preview" class="profile-preview">
          <h3 data-i18n="welcomeWelcomeBack">Welcome Back!</h3>
          <p data-i18n="welcomeFoundProfile">We found your profile in our system. Please verify this is you:</p>

          <div class="preview-header">
            <div class="preview-avatar" id="preview-avatar">?</div>
            <div class="preview-identity">
              <h4 id="preview-name">Loading...</h4>
              <p id="preview-org">Loading...</p>
            </div>
          </div>

          <div class="preview-section" id="preview-location-section">
            <div class="preview-section-title" data-i18n="welcomeLocation">Location</div>
            <p id="preview-location" style="margin: 0;"></p>
          </div>

          <div class="preview-section" id="preview-history-section">
            <div class="preview-section-title" data-i18n="welcomeConferenceHistory">Conference History</div>
            <ul class="conference-history-list" id="preview-history"></ul>
          </div>

          <div class="preview-section" id="preview-roles-section">
            <div class="preview-section-title" data-i18n="welcomeCurrentRoles">Current Roles</div>
            <div class="conference-roles" id="preview-roles"></div>
          </div>

          <div id="form-message-preview" class="form-message"></div>

          <div class="preview-actions">
            <button type="button" id="btn-send-magic-link" class="btn-primary-action" data-i18n="welcomeSendMagicLink">
              Yes, Send Me a Magic Link
            </button>
            <button type="button" id="btn-not-me" class="btn-secondary-action" data-i18n="welcomeNotMe">
              This Isn't Me
            </button>
          </div>
        </div>

        <!-- Step 2 Alt: New User (no profile found) -->
        <div id="step-new-user" class="profile-preview">
          <div class="new-user-message">
            <h4 data-i18n="welcomeNewMember">Welcome, New Member!</h4>
            <p data-i18n="welcomeNoExistingAccount">We don't have an existing account with this email address. Join our community to access the member portal, conference registration, and more.</p>
          </div>

          <div id="form-message-new" class="form-message"></div>

          <div class="preview-actions">
            <button type="button" id="btn-join-now" class="btn-primary-action" data-i18n="welcomeJoinNow">
              Join ISRS (Free)
            </button>
            <button type="button" id="btn-try-different" class="btn-secondary-action" data-i18n="welcomeTryDifferent">
              Try Different Email
            </button>
          </div>
        </div>
      </div>

      <div class="welcome-footer">
        <p><span data-i18n="welcomeAlreadyExploring">Already exploring?</span> <a href="/index.html" data-i18n="welcomeContinueToMain">Continue to main site</a> | <a href="/icsr.html" data-i18n="welcomeLearnICRS">Learn about ICSR</a> | <a href="/icsr2026.html" data-i18n="welcomeICRS2026Details">ICSR2026 Details</a></p>
      </div>
    </div>
  </div>

  <script>
    const API_BASE_URL = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1'
      ? 'http://localhost:3000'
      : '';  // Use same-origin (relative URLs) in production

    // DOM Elements - Step 1
    const stepEmail = document.getElementById('step-email');
    const form = document.getElementById('email-check-form');
    const emailInput = document.getElementById('email-input');
    const submitBtn = document.getElementById('submit-btn');
    const formMessage = document.getElementById('form-message');

    // DOM Elements - Step 2 (Returning User)
    const stepPreview = document.getElementById('step-preview');
    const previewAvatar = document.getElementById('preview-avatar');
    const previewName = document.getElementById('preview-name');
    const previewOrg = document.getElementById('preview-org');
    const previewLocation = document.getElementById('preview-location');
    const previewLocationSection = document.getElementById('preview-location-section');
    const previewHistory = document.getElementById('preview-history');
    const previewHistorySection = document.getElementById('preview-history-section');
    const previewRoles = document.getElementById('preview-roles');
    const previewRolesSection = document.getElementById('preview-roles-section');
    const formMessagePreview = document.getElementById('form-message-preview');
    const btnSendMagicLink = document.getElementById('btn-send-magic-link');
    const btnNotMe = document.getElementById('btn-not-me');

    // DOM Elements - Step 2 Alt (New User)
    const stepNewUser = document.getElementById('step-new-user');
    const formMessageNew = document.getElementById('form-message-new');
    const btnJoinNow = document.getElementById('btn-join-now');
    const btnTryDifferent = document.getElementById('btn-try-different');

    // State
    let currentEmail = '';

    // Helper function for translations
    function getText(key, fallback) {
      return typeof t === 'function' ? t(key) : fallback;
    }

    function showMessage(element, message, type) {
      element.textContent = message;
      element.className = `form-message ${type}`;
    }

    function hideMessage(element) {
      element.className = 'form-message';
    }

    function showStep(step) {
      stepEmail.style.display = step === 'email' ? 'block' : 'none';
      stepPreview.classList.toggle('visible', step === 'preview');
      stepNewUser.classList.toggle('visible', step === 'new-user');
    }

    function getInitials(firstName, lastName) {
      const first = firstName ? firstName.charAt(0).toUpperCase() : '';
      const last = lastName ? lastName.charAt(0).toUpperCase() : '';
      return first + last || '?';
    }

    function renderConferenceHistory(history) {
      if (!history || history.length === 0) {
        previewHistorySection.style.display = 'none';
        return;
      }

      previewHistorySection.style.display = 'block';
      previewHistory.innerHTML = history.map(conf => {
        const rolesHtml = conf.participation.map(role => {
          let badgeClass = 'role-badge';
          if (role.toLowerCase().includes('presenter') || role.toLowerCase().includes('presentation')) {
            badgeClass += ' presenter';
          } else if (role.toLowerCase().includes('exhibitor') || role.toLowerCase().includes('booth')) {
            badgeClass += ' exhibitor';
          } else if (role.toLowerCase().includes('sponsor')) {
            badgeClass += ' sponsor';
          }
          return `<span class="${badgeClass}">${role}</span>`;
        }).join('');

        return `
          <li class="conference-history-item">
            <strong>${conf.name || 'ICSR ' + conf.year}</strong>
            ${conf.location ? ` - ${conf.location}` : ''}
            <div class="conference-roles">${rolesHtml}</div>
          </li>
        `;
      }).join('');
    }

    function renderRoles(roles) {
      if (!roles || roles.length === 0) {
        previewRolesSection.style.display = 'none';
        return;
      }

      previewRolesSection.style.display = 'block';
      previewRoles.innerHTML = roles.map(role =>
        `<span class="role-badge">${role}</span>`
      ).join('');
    }

    function populatePreview(preview) {
      // Avatar with initials
      const initials = preview.firstName ? preview.firstName.charAt(0).toUpperCase() : '?';
      previewAvatar.textContent = initials;

      // Name and organization
      previewName.textContent = preview.fullName || preview.firstName || 'Member';
      previewOrg.textContent = [preview.position, preview.organization].filter(Boolean).join(' at ') || '';

      // Location
      if (preview.location) {
        previewLocationSection.style.display = 'block';
        previewLocation.textContent = preview.location;
      } else {
        previewLocationSection.style.display = 'none';
      }

      // Conference history
      renderConferenceHistory(preview.conferenceHistory);

      // Current roles
      renderRoles(preview.roles);
    }

    // Step 1: Email submission - lookup profile
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      hideMessage(formMessage);

      const email = emailInput.value.trim().toLowerCase();
      if (!email) {
        showMessage(formMessage, getText('welcomeEnterEmailError', 'Please enter your email address'), 'error');
        return;
      }

      currentEmail = email;
      submitBtn.disabled = true;
      submitBtn.textContent = getText('welcomeChecking', 'Checking...');

      try {
        // First, preview the profile
        const response = await fetch(`${API_BASE_URL}/api/auth/preview-profile`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email })
        });

        const data = await response.json();

        if (response.ok && data.success) {
          if (data.found && data.preview) {
            // Existing user - show preview
            populatePreview(data.preview);
            showStep('preview');
          } else {
            // New user - show join prompt
            showStep('new-user');
          }
        } else {
          showMessage(formMessage, data.error || getText('welcomeSomethingWrong', 'Something went wrong. Please try again.'), 'error');
        }
      } catch (error) {
        console.error('Error:', error);
        showMessage(formMessage, getText('welcomeNetworkError', 'Network error. Please check your connection and try again.'), 'error');
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = getText('welcomeContinue', 'Continue');
      }
    });

    // Step 2: Send magic link (returning user)
    btnSendMagicLink.addEventListener('click', async () => {
      hideMessage(formMessagePreview);
      btnSendMagicLink.disabled = true;
      btnSendMagicLink.textContent = getText('welcomeSending', 'Sending...');

      try {
        const response = await fetch(`${API_BASE_URL}/api/auth/request-login`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email: currentEmail })
        });

        const data = await response.json();

        if (response.ok && data.success) {
          showMessage(formMessagePreview, getText('welcomeCheckEmail', 'âœ… Check your email! We\'ve sent you a magic link to log in.'), 'success');
          btnSendMagicLink.textContent = getText('welcomeEmailSent', 'Email Sent!');

          // Log dev magic link if available
          if (data.devMagicLink) {
            console.log('DEV Magic link:', data.devMagicLink);
          }
        } else {
          showMessage(formMessagePreview, data.error || getText('welcomeSomethingWrong', 'Something went wrong. Please try again.'), 'error');
          btnSendMagicLink.disabled = false;
          btnSendMagicLink.textContent = getText('welcomeSendMagicLink', 'Yes, Send Me a Magic Link');
        }
      } catch (error) {
        console.error('Error:', error);
        showMessage(formMessagePreview, getText('welcomeNetworkError', 'Network error. Please check your connection and try again.'), 'error');
        btnSendMagicLink.disabled = false;
        btnSendMagicLink.textContent = getText('welcomeSendMagicLink', 'Yes, Send Me a Magic Link');
      }
    });

    // Step 2: "Not me" button - go back to email entry
    btnNotMe.addEventListener('click', () => {
      currentEmail = '';
      emailInput.value = '';
      hideMessage(formMessagePreview);
      btnSendMagicLink.disabled = false;
      btnSendMagicLink.textContent = getText('welcomeSendMagicLink', 'Yes, Send Me a Magic Link');
      showStep('email');
    });

    // Step 2 Alt: Join now (new user)
    btnJoinNow.addEventListener('click', async () => {
      hideMessage(formMessageNew);
      btnJoinNow.disabled = true;
      btnJoinNow.textContent = getText('welcomeCreating', 'Setting up...');

      // For now, show message about signup coming soon
      // TODO: Implement actual signup flow or redirect to membership form
      showMessage(formMessageNew, getText('welcomeSignupComingSoon', 'Membership signup coming soon! For now, please contact info@shellfish-society.org'), 'info');

      setTimeout(() => {
        btnJoinNow.disabled = false;
        btnJoinNow.textContent = getText('welcomeJoinNow', 'Join ISRS (Free)');
      }, 3000);
    });

    // Step 2 Alt: Try different email
    btnTryDifferent.addEventListener('click', () => {
      currentEmail = '';
      emailInput.value = '';
      hideMessage(formMessageNew);
      showStep('email');
    });

    // Initialize
    showStep('email');
  </script>

  <script src="/js/components.js?v=2.1.0"></script>
</body>
</html>
